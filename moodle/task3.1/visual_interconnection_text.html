<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Structure: Interconnections - Adaptive Parameter Selection for KRR</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a2e;
            min-height: 100vh;
            color: #eee;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            text-align: center;
        }
        .header h1 { font-size: 1.4em; margin-bottom: 8px; }
        .header p { opacity: 0.9; font-size: 0.9em; }
        
        .main-container {
            display: flex;
            min-height: calc(100vh - 100px);
        }
        
        /* Network Diagram */
        .network-panel {
            flex: 1;
            padding: 20px;
            position: relative;
            overflow: auto;
        }
        
        .network-svg {
            width: 100%;
            height: 600px;
        }
        
        /* Detail Panel */
        .detail-panel {
            width: 380px;
            background: #16213e;
            padding: 20px;
            border-left: 1px solid #333;
            overflow-y: auto;
            max-height: calc(100vh - 100px);
        }
        .detail-title {
            font-size: 1.1em;
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }
        .detail-section {
            margin-bottom: 20px;
        }
        .detail-section h4 {
            color: #a0aec0;
            font-size: 0.8em;
            text-transform: uppercase;
            margin-bottom: 8px;
        }
        .detail-text {
            background: #1a1a2e;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.85em;
            line-height: 1.6;
            color: #cbd5e0;
        }
        .detail-text em {
            color: #ffd700;
            font-style: normal;
        }
        
        .connections-list {
            list-style: none;
        }
        .connections-list li {
            background: #1a1a2e;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 6px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .connections-list li:hover {
            background: #2d3748;
        }
        .arrow { color: #667eea; }
        
        /* Node styles */
        .node {
            cursor: pointer;
            transition: all 0.2s;
        }
        .node:hover { filter: brightness(1.2); }
        .node-circle {
            stroke: #fff;
            stroke-width: 2;
        }
        .node-text {
            fill: #fff;
            font-size: 11px;
            text-anchor: middle;
            pointer-events: none;
        }
        .node-label {
            fill: #a0aec0;
            font-size: 10px;
            text-anchor: middle;
            pointer-events: none;
        }
        
        /* Edge styles */
        .edge {
            stroke: #4a5568;
            stroke-width: 2;
            fill: none;
            opacity: 0.6;
        }
        .edge.highlighted {
            stroke: #ffd700;
            stroke-width: 3;
            opacity: 1;
        }
        .edge-arrow {
            fill: #4a5568;
        }
        
        /* Legend */
        .legend {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(22, 33, 62, 0.95);
            padding: 15px;
            border-radius: 10px;
            font-size: 0.8em;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 5px 0;
        }
        .legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .selected { 
            stroke: #ffd700 !important; 
            stroke-width: 4 !important; 
        }
        
        .instruction {
            text-align: center;
            padding: 10px;
            background: #16213e;
            color: #a0aec0;
            font-size: 0.85em;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Adaptive Parameter Selection for Kernel Ridge Regression</h1>
        <p>Shao-Bo Lin | Xi'an Jiaotong University</p>
    </div>
    
    <div class="instruction">Click on any node to see its text excerpt and connections</div>
    
    <div class="main-container">
        <div class="network-panel">
            <svg class="network-svg" id="network">
                <!-- Arrows definition -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#4a5568"/>
                    </marker>
                    <marker id="arrowhead-gold" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#ffd700"/>
                    </marker>
                </defs>
                
                <!-- Edges (connections) -->
                <g id="edges">
                    <!-- Assumptions feed into Lemmas -->
                    <path class="edge" id="edge-a1-l1" d="M 180,150 Q 200,200 280,220" marker-end="url(#arrowhead)"/>
                    <path class="edge" id="edge-a2-l1" d="M 180,220 L 280,220" marker-end="url(#arrowhead)"/>
                    <path class="edge" id="edge-a3-l1" d="M 180,290 Q 200,260 280,220" marker-end="url(#arrowhead)"/>
                    
                    <!-- Assumptions feed into Proposition -->
                    <path class="edge" id="edge-a1-p1" d="M 180,150 Q 300,100 420,150" marker-end="url(#arrowhead)"/>
                    <path class="edge" id="edge-a2-p1" d="M 180,220 Q 300,180 420,150" marker-end="url(#arrowhead)"/>
                    
                    <!-- Lemma 1 referenced by Theorem -->
                    <path class="edge" id="edge-l1-t1" d="M 340,220 Q 450,280 540,320" marker-end="url(#arrowhead)"/>
                    
                    <!-- Lemma 2 motivates the problem -->
                    <path class="edge" id="edge-l2-d1" d="M 340,320 Q 400,320 420,250" marker-end="url(#arrowhead)"/>
                    
                    <!-- Proposition enables Definition -->
                    <path class="edge" id="edge-p1-d1" d="M 480,150 Q 500,200 480,250" marker-end="url(#arrowhead)"/>
                    
                    <!-- Definition leads to Theorem -->
                    <path class="edge" id="edge-d1-t1" d="M 480,250 Q 510,280 540,320" marker-end="url(#arrowhead)"/>
                    
                    <!-- Proof Lemmas feed into Proposition proof -->
                    <path class="edge" id="edge-pl3-p1" d="M 680,150 Q 600,150 480,150" marker-end="url(#arrowhead)"/>
                    
                    <!-- Proof Lemmas feed into Theorem -->
                    <path class="edge" id="edge-pl4-t1" d="M 680,220 Q 620,270 600,320" marker-end="url(#arrowhead)"/>
                    <path class="edge" id="edge-pl5-t1" d="M 680,290 Q 640,300 600,320" marker-end="url(#arrowhead)"/>
                    <path class="edge" id="edge-pl6-t1" d="M 680,360 Q 650,350 600,320" marker-end="url(#arrowhead)"/>
                </g>
                
                <!-- Nodes -->
                <g id="nodes">
                    <!-- Section labels -->
                    <text x="120" y="100" fill="#667eea" font-size="12" font-weight="bold">FOUNDATIONS</text>
                    <text x="420" y="100" fill="#9f7aea" font-size="12" font-weight="bold">MAIN CONTRIBUTIONS</text>
                    <text x="650" y="100" fill="#ed8936" font-size="12" font-weight="bold">PROOFS</text>
                    
                    <!-- Assumptions (green) -->
                    <g class="node" data-id="a1" onclick="selectNode('a1')">
                        <circle class="node-circle" cx="120" cy="150" r="28" fill="#48bb78"/>
                        <text class="node-text" x="120" y="154">A1</text>
                        <text class="node-label" x="120" y="190">Boundedness</text>
                    </g>
                    <g class="node" data-id="a2" onclick="selectNode('a2')">
                        <circle class="node-circle" cx="120" cy="220" r="28" fill="#48bb78"/>
                        <text class="node-text" x="120" y="224">A2</text>
                        <text class="node-label" x="120" y="260">Regularity</text>
                    </g>
                    <g class="node" data-id="a3" onclick="selectNode('a3')">
                        <circle class="node-circle" cx="120" cy="290" r="28" fill="#48bb78"/>
                        <text class="node-text" x="120" y="294">A3</text>
                        <text class="node-label" x="120" y="330">Eff. Dimension</text>
                    </g>
                    
                    <!-- Lemmas (orange) -->
                    <g class="node" data-id="l1" onclick="selectNode('l1')">
                        <circle class="node-circle" cx="280" cy="220" r="32" fill="#ed8936"/>
                        <text class="node-text" x="280" y="224">L1</text>
                        <text class="node-label" x="280" y="265">Optimal KRR</text>
                    </g>
                    <g class="node" data-id="l2" onclick="selectNode('l2')">
                        <circle class="node-circle" cx="280" cy="320" r="32" fill="#ed8936"/>
                        <text class="node-text" x="280" y="324">L2</text>
                        <text class="node-label" x="280" y="365">LP Rates</text>
                    </g>
                    
                    <!-- Proposition (purple) -->
                    <g class="node" data-id="p1" onclick="selectNode('p1')">
                        <circle class="node-circle" cx="420" cy="150" r="32" fill="#9f7aea"/>
                        <text class="node-text" x="420" y="154">P1</text>
                        <text class="node-label" x="420" y="195">Spectral Property</text>
                    </g>
                    
                    <!-- Definition (teal) -->
                    <g class="node" data-id="d1" onclick="selectNode('d1')">
                        <circle class="node-circle" cx="420" cy="250" r="32" fill="#38b2ac"/>
                        <text class="node-text" x="420" y="254">D1</text>
                        <text class="node-label" x="420" y="295">ASUS Method</text>
                    </g>
                    
                    <!-- Theorem (red) - Main Result -->
                    <g class="node" data-id="t1" onclick="selectNode('t1')">
                        <circle class="node-circle" cx="540" cy="320" r="40" fill="#e53e3e"/>
                        <text class="node-text" x="540" y="316">T1</text>
                        <text class="node-text" x="540" y="330" font-size="9">MAIN</text>
                        <text class="node-label" x="540" y="375">Optimal Rates</text>
                    </g>
                    
                    <!-- Proof Lemmas (orange, smaller) -->
                    <g class="node" data-id="pl3" onclick="selectNode('pl3')">
                        <circle class="node-circle" cx="680" cy="150" r="24" fill="#dd6b20"/>
                        <text class="node-text" x="680" y="154">L3</text>
                        <text class="node-label" x="680" y="185">Operator Bounds</text>
                    </g>
                    <g class="node" data-id="pl4" onclick="selectNode('pl4')">
                        <circle class="node-circle" cx="680" cy="220" r="24" fill="#dd6b20"/>
                        <text class="node-text" x="680" y="224">L4</text>
                        <text class="node-label" x="680" y="255">Error Decomp</text>
                    </g>
                    <g class="node" data-id="pl5" onclick="selectNode('pl5')">
                        <circle class="node-circle" cx="680" cy="290" r="24" fill="#dd6b20"/>
                        <text class="node-text" x="680" y="294">L5</text>
                        <text class="node-label" x="680" y="325">Small λ Case</text>
                    </g>
                    <g class="node" data-id="pl6" onclick="selectNode('pl6')">
                        <circle class="node-circle" cx="680" cy="360" r="24" fill="#dd6b20"/>
                        <text class="node-text" x="680" y="364">L6</text>
                        <text class="node-label" x="680" y="395">Large λ Case</text>
                    </g>
                </g>
            </svg>
            
            <div class="legend">
                <div class="legend-item"><div class="legend-dot" style="background:#48bb78"></div> Assumptions</div>
                <div class="legend-item"><div class="legend-dot" style="background:#ed8936"></div> Lemmas</div>
                <div class="legend-item"><div class="legend-dot" style="background:#9f7aea"></div> Proposition</div>
                <div class="legend-item"><div class="legend-dot" style="background:#38b2ac"></div> Definition</div>
                <div class="legend-item"><div class="legend-dot" style="background:#e53e3e"></div> Theorem</div>
            </div>
        </div>
        
        <div class="detail-panel" id="detail-panel">
            <div class="detail-title" id="detail-title">Select a node to view details</div>
            <div id="detail-content">
                <p style="color:#718096;">Click on any node in the network diagram to see its text excerpt and connections to other parts of the paper.</p>
            </div>
        </div>
    </div>

    <script>
        const nodeData = {
            a1: {
                title: "Assumption 1: Boundedness",
                type: "Assumption",
                text: `"Assume ∫y²dρ < ∞ and the Bernstein noise condition holds with constants M and γ."

This is the <em>Bernstein noise assumption</em>, which is satisfied for bounded, Gaussian, and sub-Gaussian noise.`,
                connections: [
                    {to: "l1", desc: "Required for optimal learning rates"},
                    {to: "p1", desc: "Used in spectral property proof"}
                ],
                usedBy: ["Lemma 1", "Lemma 2", "Proposition 1", "All proof lemmas"]
            },
            a2: {
                title: "Assumption 2: Regularity",
                type: "Assumption",
                text: `"For r > 0, assume f_ρ = L_K^r h_ρ for some h_ρ ∈ L²_ρX"

This describes the <em>regularity of the regression function</em>. Larger r implies better regularity. When r ≥ 1/2, f ∈ H_K; when r < 1/2, f ∉ H_K.`,
                connections: [
                    {to: "l1", desc: "Determines optimal convergence rate"},
                    {to: "p1", desc: "Affects subdivision analysis"},
                    {to: "t1", desc: "Rate depends on r: |D|^(-r/(2r+s))"}
                ],
                usedBy: ["Lemma 1", "Proposition 1", "Theorem 1"]
            },
            a3: {
                title: "Assumption 3: Effective Dimension",
                type: "Assumption",
                text: `"There exists s ∈ (0,1] such that N(λ) ≤ C₀λ^(-s)"

This is the <em>capacity assumption</em> measured by the effective dimension N(λ) = Tr((λI + L_K)^(-1)L_K).`,
                connections: [
                    {to: "l1", desc: "Determines capacity-dependent rate"},
                    {to: "d1", desc: "Used in ASUS stopping criterion"}
                ],
                usedBy: ["Lemma 1", "Definition 1 (ASUS)"]
            },
            l1: {
                title: "Lemma 1: Optimal KRR Rates",
                type: "Lemma",
                text: `"With λ* = c₀|D|^(-1/(2r+s)), with confidence 1-δ:
‖f_{D,λ*} - f_ρ‖_ρ ≤ C̃|D|^(-r/(2r+s)) log(2/δ)"

This establishes the <em>optimal learning rates</em> that KRR can achieve when the regularization parameter is appropriately selected. This serves as the <em>benchmark</em> for the paper.`,
                connections: [
                    {to: "t1", desc: "ASUS achieves same rate (Theorem 1)"},
                    {to: "l2", desc: "LP only achieves near-optimal (log log factor)"}
                ],
                usedBy: ["Comparison benchmark in Theorem 1"]
            },
            l2: {
                title: "Lemma 2: Lepskii Principle Rates",
                type: "Lemma",
                text: `"With LP parameter selection:
‖f_{D,λ_LP} - f_ρ‖_ρ ≤ C̃|D|^(-r/(2r+s)) (log log |D|) log(2/δ)"

The <em>double logarithmic factor</em> shows LP achieves only <em>near-optimal</em> rates. This is the <em>gap</em> that motivates the paper's contribution.`,
                connections: [
                    {to: "d1", desc: "ASUS designed to remove this gap"},
                    {to: "t1", desc: "ASUS removes log log factor"}
                ],
                usedBy: ["Motivation for ASUS development"]
            },
            p1: {
                title: "Proposition 1: Spectral Property",
                type: "Proposition",
                text: `"For λ_k = 1/(bk), the key bound becomes:
‖(L_{K,D}+λ_k)^(1/2)(f_{D,λ_k} - f_{D,λ_{k+1}})‖_K ≤ C̄₁ b λ_k (W_{D,λ_k} + λ_k^r)"

The <em>crucial insight</em>: delicate subdivision (uniform vs logarithmic) adds an extra λ_k factor, enabling optimal rates. This is <em>unique to KRR</em>'s spectral structure.`,
                connections: [
                    {to: "d1", desc: "Enables ASUS stopping criterion"},
                    {to: "pl3", desc: "Proof uses Lemma 3 bounds"}
                ],
                usedBy: ["Definition 1 (ASUS)", "Proof section"]
            },
            d1: {
                title: "Definition 1: ASUS",
                type: "Definition",
                text: `"<em>Adaptive Selection with Uniform Subdivision (ASUS)</em>:
For λ_k = 1/(bk), define k̂_uni as the first k satisfying:
‖(L_{K,D}+λ_{k-1})^(1/2)(f_{λ_k,D} - f_{λ_{k-1},D})‖_K ≥ C_US W_{D,λ_k} log²(8/δ)"

Key advantages:
1. <em>Early-stopping</em> type (no pairwise comparisons)
2. <em>Uniform subdivision</em> exploits spectral property`,
                connections: [
                    {to: "t1", desc: "Achieves optimal rates"},
                    {to: "p1", desc: "Built on spectral property insight"}
                ],
                usedBy: ["Theorem 1 (main result)"]
            },
            t1: {
                title: "Theorem 1: ASUS Optimality (MAIN RESULT)",
                type: "Theorem",
                text: `"Under Assumptions 1-3, with confidence 1-δ:
‖f_{D,λ̂_uni} - f_ρ‖_ρ ≤ C₁|D|^(-r/(2r+s)) log⁴(8/δ)
‖f_{D,λ̂_uni} - f_ρ‖_K ≤ C₁|D|^(-r-1/2)/(2r+s)) log⁴(8/δ)"

<em>ASUS achieves OPTIMAL learning rates</em>, better than:
• Discrepancy principle
• Balancing principle  
• Lepskii principle`,
                connections: [
                    {to: "l1", desc: "Matches optimal rate from Lemma 1"},
                    {to: "pl5", desc: "Proof combines Lemma 5 (small λ)"},
                    {to: "pl6", desc: "...and Lemma 6 (large λ)"}
                ],
                usedBy: ["Main contribution of the paper"]
            },
            pl3: {
                title: "Lemma 3: Operator Bounds",
                type: "Proof Lemma",
                text: `"Bounds for key operators:
• S_{D,λ} ≤ C₁* (log N(λ)/(λ|D|) + √(...))
• Q_{D,λ} ≤ √2
• P_{D,λ} ≤ 16(κM+γ) W_{D,λ} log²(8/δ)"

These <em>technical bounds</em> on the integral operators are essential for the proofs.`,
                connections: [
                    {to: "p1", desc: "Used in Proposition 1 proof"}
                ],
                usedBy: ["Proof of Proposition 1"]
            },
            pl4: {
                title: "Lemma 4: Error Decomposition",
                type: "Proof Lemma",
                text: `"For any λ ≥ λ_{K*}:
max{λ^(1/2)‖f_{D,λ}-f_ρ‖_K, ‖f_{D,λ}-f_ρ‖_ρ} 
≤ 2^(r-1/2) λ^r ‖h_ρ‖_ρ + 32(κM+γ) W_{D,λ} log²(8/δ)"

Standard <em>bias-variance decomposition</em> for KRR error.`,
                connections: [
                    {to: "pl5", desc: "Used in small λ case"},
                    {to: "t1", desc: "Foundation for Theorem 1 proof"}
                ],
                usedBy: ["Lemma 5", "Theorem 1 proof"]
            },
            pl5: {
                title: "Lemma 5: Small λ Case",
                type: "Proof Lemma",
                text: `"If λ̂_uni ≤ λ*, then:
‖f_{D,λ̂_uni} - f_ρ‖_ρ ≤ C̄₂|D|^(-r/(2r+s)) log²(8/δ)"

Handles the case when ASUS selects a parameter <em>smaller than optimal</em>.`,
                connections: [
                    {to: "t1", desc: "Combined with Lemma 6 for Theorem 1"}
                ],
                usedBy: ["Theorem 1 proof"]
            },
            pl6: {
                title: "Lemma 6: Large λ Case",
                type: "Proof Lemma",
                text: `"If λ̂_uni > λ*, then:
‖f_{D,λ̂_uni} - f_ρ‖_ρ ≤ C̄₅|D|^(-r/(2r+s)) log⁴(8/δ)"

Handles the case when ASUS selects a parameter <em>larger than optimal</em>. Uses triangle inequality and telescoping sum.`,
                connections: [
                    {to: "t1", desc: "Combined with Lemma 5 for Theorem 1"}
                ],
                usedBy: ["Theorem 1 proof"]
            }
        };

        let selectedNode = null;

        function selectNode(id) {
            // Clear previous selection
            document.querySelectorAll('.node-circle').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.edge').forEach(e => {
                e.classList.remove('highlighted');
                e.setAttribute('marker-end', 'url(#arrowhead)');
            });
            
            // Highlight selected node
            const node = document.querySelector(`[data-id="${id}"] .node-circle`);
            if (node) node.classList.add('selected');
            
            // Highlight connected edges
            const data = nodeData[id];
            if (data && data.connections) {
                data.connections.forEach(conn => {
                    const edge = document.getElementById(`edge-${id}-${conn.to}`);
                    if (edge) {
                        edge.classList.add('highlighted');
                        edge.setAttribute('marker-end', 'url(#arrowhead-gold)');
                    }
                });
            }
            
            // Update detail panel
            updateDetailPanel(id);
            selectedNode = id;
        }

        function updateDetailPanel(id) {
            const data = nodeData[id];
            if (!data) return;
            
            document.getElementById('detail-title').textContent = data.title;
            
            let html = `
                <div class="detail-section">
                    <h4>Text Excerpt</h4>
                    <div class="detail-text">${data.text}</div>
                </div>
            `;
            
            if (data.connections && data.connections.length > 0) {
                html += `
                    <div class="detail-section">
                        <h4>Connects To</h4>
                        <ul class="connections-list">
                            ${data.connections.map(c => `
                                <li onclick="selectNode('${c.to}')">
                                    <span class="arrow">→</span>
                                    <span><strong>${nodeData[c.to]?.title.split(':')[0] || c.to}</strong>: ${c.desc}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                `;
            }
            
            if (data.usedBy) {
                html += `
                    <div class="detail-section">
                        <h4>Used By</h4>
                        <div class="detail-text">${Array.isArray(data.usedBy) ? data.usedBy.join(', ') : data.usedBy}</div>
                    </div>
                `;
            }
            
            document.getElementById('detail-content').innerHTML = html;
        }

        // Initialize with main theorem selected
        selectNode('t1');
    </script>
</body>
</html>
